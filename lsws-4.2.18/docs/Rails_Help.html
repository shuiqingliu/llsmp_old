<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>LiteSpeed Web Server Users' Manual - Rack/Rails Settings</title>
  <meta name="description" content="LiteSpeed Web Server Users' Manual - Rack/Rails Settings." />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="img/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="css/hdoc.css">
</head>
<body>
<div class="pagewrapper"><div class="sidetree">
<h3>LiteSpeed Web Server <a href="index.html"> Users' Manual</a></h3>
<h5>Version 5.0 Rev. 1 </h5>
<hr/>
<div>
<ul class="toctop">
<li>License <a href="license_std.html">Std</a> / <a href="license.html">Ent</a></li>
<li><a href="intro.html">Introduction</a></li>
<li><a href="install.html">Installation</a></li>
<li><a href="admin.html">Administration</a>
	<ul class="level2"><li><a href="ServerStat_Help.html">Service Manager</a></li></ul></li>
<li><a href="security.html">Security</a></li>
<li><a href="config.html">Configurations</a>
	<ul class="level2">
	<li><a href="ServGeneral_Help.html">Server General</a></li>
	<li><a href="ServTuning_Help.html">Server Tuning</a></li>
	<li><a href="ServSecurity_Help.html">Server Security</a></li>
	<li><a href="RequestFilter_Help.html">Request Filter</a></li>
	<li><a href="Cache_Help.html">Page Cache</a></li>
	<li><a href="ExtApp_Help.html">External Apps</a></li>
	<li><a href="ScriptHandler_Help.html">Script Handler</a></li>
	<li><span class="current"><a href="Rails_Help.html">Rack/Rails Settings</a></span></li>
	<li><a href="Listeners_Help.html">Listeners</a></li>
	<li><a href="Templates_Help.html">Templates</a></li>
	<li><a href="VirtualHosts_Help.html">Virtual Host List</a></li>
	<li><a href="VHGeneral_Help.html">Virtual Host General</a></li>
	<li><a href="VHSecurity_Help.html">Virtual Host Security</a></li>
	<li><a href="Rewrite_Help.html">Rewrite</a></li>
	<li><a href="Context_Help.html">Context</a></li>
	<li><a href="VHAddOns_Help.html">Add-ons</a></li>
	<li><a href="AdminGeneral_Help.html">Admin Server</a></li>
	<li><a href="AdminListener_Help.html">Admin Listeners</a></li>
	</ul>

</li>
</ul>
</div></div>
<div class="contentwrapper"><div class="nav-bar"><div class="prev">&#171 <a href="ScriptHandler_Help.html">Script Handler</a></div><div class="center"><a href="config.html">Configuration</a></div><div class="next"><a href="Listeners_Help.html">Listeners</a> &#187;</div></div>
<h1>Rack/Rails Settings</h1><h4>Table of Contents</h4><section class="toc"><section class="toc-row"><header><a href="#railsDefault">Ruby Rack/Rails Settings</a></header><p>
<a href="#rubyBin">Ruby Path</a>&nbsp;|&nbsp;<a href="#railsEnv">Run-Time Mode</a>&nbsp;|&nbsp;<a href="#maxConns">Max Connections</a>&nbsp;|&nbsp;<a href="#env">Environment</a>&nbsp;|&nbsp;<a href="#initTimeout">Initial Request Timeout</a>&nbsp;|&nbsp;<a href="#retryTimeout">Retry Timeout</a>&nbsp;|&nbsp;<a href="#pcKeepAliveTimeout">Keep Alive Timeout</a>&nbsp;|&nbsp;<a href="#respBuffer">Response Buffering</a>&nbsp;|&nbsp;<a href="#extMaxIdleTime">Max Idle Time</a>&nbsp;|&nbsp;<a href="#backlog">Back Log</a>&nbsp;|&nbsp;<a href="#runOnStartUp">Run On Start Up</a>&nbsp;|&nbsp;<a href="#extAppPriority">Priority</a>&nbsp;|&nbsp;<a href="#memSoftLimit">Memory Soft Limit</a>&nbsp;|&nbsp;<a href="#memHardLimit">Memory Hard Limit</a>&nbsp;|&nbsp;<a href="#procSoftLimit">Process Soft Limit</a>&nbsp;|&nbsp;<a href="#procHardLimit">Process Hard Limit</a>&nbsp;|&nbsp;</p></section>
<section class="toc-row"><header><a href="#railsHosting">Rack/Rails Shared Hosting</a></header><p>
<a href="#enableRailsHosting">Enable Shared Hosting</a>&nbsp;|&nbsp;<a href="#railsAppLimit">Max Apps Per Account</a>&nbsp;|&nbsp;<a href="#rubyProcLimit">Max Ruby Processes Per Account</a>&nbsp;|&nbsp;</p></section>
</section>
<section><div class="helpitem"><a name="railsDefault"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Ruby Rack/Rails Settings<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Default configurations for Ruby Rack/Rails applications.</td></tr> </table> </div>
<div class="helpitem"><a name="rubyBin"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Ruby Path<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies path to Ruby executable. Generally, it is /usr/bin/ruby or /usr/local/bin/ruby depending on where Ruby has been installed to.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Absolute path.</td></tr> </table> </div>
<div class="helpitem"><a name="railsEnv"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Run-Time Mode<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies which mode Rack/Rails will be running as: "Development",  "Production", or "Staging". The default is "Production".</td></tr> <tr><td><span class="ht-label">Syntax: </span>Select from drop down list</td></tr> </table> </div>
<div class="helpitem"><a name="maxConns"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Max Connections<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies the maximum number of concurrent connections that can be established  between the web server and an external application. This setting controls how  many requests can be processed concurrently by an external application,   however, the real limit also depends on the external application itself.  Setting this value higher will not help if the external application is not fast enough or cannot scale to a large number of concurrent requests.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> <tr><td><span class="ht-label">Tips: </span>[Performance] Setting a high value does not directly translate to higher performance.  Setting the limit to a value that will not overload the external  application will provide the best performance/throughput.</td></tr> </table> </div>
<div class="helpitem"><a name="env"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Environment<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies extra environment variables for the external application.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Key=value. Multiple variables can be separated by "ENTER"</td></tr> </table> </div>
<div class="helpitem"><a name="initTimeout"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Initial Request Timeout<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies the maximum time in seconds the web server will wait for the external  application to respond to the first request over a new established connection.  If the web server does not receive any data from the external application within this timeout limit, it will mark this connection as bad. This helps to identify communication problems with external applications as quickly as possible. If some requests take longer to  process, increase this limit to avoid 503 error messages.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> </table> </div>
<div class="helpitem"><a name="retryTimeout"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Retry Timeout<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies the period of time that the web server waits before retrying an external application that had a prior communication problem.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> </table> </div>
<div class="helpitem"><a name="pcKeepAliveTimeout"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Keep Alive Timeout<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies the maximum time to keep an idle persistent connection open. When set to "-1", the connection will never timeout. When set to greater than or equal to 0, the connection will be closed after this time in seconds has passed.</td></tr> <tr><td><span class="ht-label">Syntax: </span>int</td></tr> </table> </div>
<div class="helpitem"><a name="respBuffer"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Response Buffering<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies whether to buffer response received from external applications. If a "nph-" (Non-Parsed-Header) script is detected,  buffering is turned off for responses with full HTTP headers.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Select from drop down list</td></tr> </table> </div>
<div class="helpitem"><a name="extMaxIdleTime"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Max Idle Time<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies the maximum idle time before an external application is stopped by the server. When set to "-1", the external application will not be stopped by the server. The default value is "-1". This feature allows resources used by idle applications to be freed. It is especially useful in the mass hosting environment when you need to define many applications running in "setuid" mode for the sake of maximum security.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Select from radio box</td></tr> <tr><td><span class="ht-label">Tips: </span>[Performance] This feature is especially useful in the mass hosting environment.  In order to prevent files owned by one virtual host from being accessed by the  external application scripts of another virtual host, mass hosting often requires  many different applications running at the same time in SetUID mode. Set this Max  Idle Time low to prevent these external applications from idling unnecessarily.</td></tr> </table> </div>
<div class="helpitem"><a name="backlog"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Back Log<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies the backlog of the listening socket.  Required if <span class="tagI"><a href="#autoStart">Auto Start</a></span> is enabled.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> </table> </div>
<div class="helpitem"><a name="runOnStartUp"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Run On Start Up<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies whether to start the external application at server start up. Only applicable to external applications that can manage their own child processes and where  <span class="tagI"><a href="#instances">Instances</a></span> value is set to "1". If enabled, external processes will be created at server startup instead of run-time.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Select from radio box</td></tr> <tr><td><span class="ht-label">Tips: </span>[Performance] If the configured external process has significant startup overhead, like a Rails app, then  this option should be enabled to decrease first page response time.</td></tr> </table> </div>
<div class="helpitem"><a name="extAppPriority"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Priority<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies priority of the external application process. Value ranges from <span class="val">-20</span> to <span class="val">20</span>. A lower number means a higher priority.  An external application process cannot have a higher priority than the web server. If this priority is set to a lower number than the server's, the server's priority will be used for this value.</td></tr> <tr><td><span class="ht-label">Syntax: </span>int</td></tr> <tr><td><span class="ht-label">See Also: </span>Server <span class="tagI"><a href="ServGeneral_Help.html#serverPriority">Priority</a></span></td></tr> </table> </div>
<div class="helpitem"><a name="memSoftLimit"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Memory Soft Limit<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies the memory consumption limit in bytes for an external application process or an external application started by the server.  <br/><br/> The main purpose of this limit is to prevent excessive memory usage because of software bugs or intentional attacks, not to impose a limit on normal usage. Make sure to leave enough head room, otherwise your application may fail and 503 error may be returned. It can be set at the server- level or at an individual external application level. The server-level limit will be used if it is not set at the individual application level.<br/><br/> The operating system's default setting will be used if the value is absent at both levels or set to <span class="val">0</span>.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> <tr><td><span class="ht-label">Tips: </span>[Attention] Do not over adjust this limit. This may result in 503 errors if your application needs more memory.</td></tr> </table> </div>
<div class="helpitem"><a name="memHardLimit"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Memory Hard Limit<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Much the same as <span class="tagI"><a href="#memSoftLimit">Memory Soft Limit</a></span>, except the soft limit can be raised up to the hard limit from within a user process. The hard limit can be set at server level or at an individual external application level. The server-level limit will be used if   it is not set at an individual application level. <br/><br/> The operating system's default will be used if the value is absent at both levels or set to <span class="val">0</span>.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> <tr><td><span class="ht-label">Example: </span>[Attention] Do not over adjust this limit. This may result in 503 errors if your application need more memory.</td></tr> </table> </div>
<div class="helpitem"><a name="procSoftLimit"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Process Soft Limit<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Limits the total number of processes that can be created on behalf of a user. All existing processes will be counted against this limit, not just new processes to be started.  If the limit is set to <span class="val">10</span>, and there are more than 10 processes running under one user, then no new process can be started by the web server for that user (through suEXEC). <br/><br/> The main purpose of this limit is to prevent "fork bomb" attacks or excessive usage, not to impose a limit on normal usage (and  this setting will be ignored by the server if it is set below certain levels).  Make sure to leave enough head room. This can be set at the server level or at an   individual external application level. The server-level limit will be used if it is not set at an individual application level. The operating system's default setting will be used if this value is <span class="val">0</span> or absent at both levels.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> <tr><td><span class="ht-label">Example: </span>[Attention] All processes run under the same user ID at server level will be counted against this limit.  Do not over adjust this limit. Doing so may cause 503 errors if a user needs to create many processes.</td></tr> </table> </div>
<div class="helpitem"><a name="procHardLimit"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Process Hard Limit<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Much the same as <span class="tagI"><a href="#procSoftLimit">Process Soft Limit</a></span>, except the soft limit can be raised up to the hard limit from within a user process. The hard limit can be set at the server level or at an   individual external application level. The server-level limit will be used if it is not set at an individual application level.    The operating system's default value will be used if the value is absent at both levels or set to <span class="val">0</span>.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> </table> </div>
<div class="helpitem"><a name="railsHosting"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Rack/Rails Shared Hosting<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>LiteSpeed's Rack/Rails Shared Hosting settings allow users  using our high performance, highly scalable Ruby LSAPI module to  easily control their customers' Ruby usage.<br/><br/> LiteSpeed Rack/Rails hosting solution can deliver the best performance with minimum server resource requirement. In addition, it is compatible with all existing web hosting control panels. <br/><br/> The user-manageable Rack/Rails configuration file (".ls_rails_config")  is located in the user's home directory or virtual host root directory.   Syntax is as follows: <br/> <blockquote> #RailsApp <name> <App Path> <Rails Evn> <Children Processes> <RunOnStart><br/> RailsApp testApp "/lsws/testrails" "development" 4 1 <br/><br/> #RailsAppMap <name> <domain> <URI> <br/> RailsAppMap testApp "testrails.com" "/" <br/> RailsAppMap testApp "test.testrails.com" "/"  </blockquote><br/> The "App Path" is relative to the user's home directory or the virtual host root directory.<br/><br/> Whenever this file is touched, Rack/Rails applications will be restarted.</td></tr> </table> </div>
<div class="helpitem"><a name="enableRailsHosting"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Enable Shared Hosting<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies whether to enable Rack/Rails shared hosting. The default is "Disabled".</td></tr> <tr><td><span class="ht-label">Syntax: </span>Select from radio box</td></tr> </table> </div>
<div class="helpitem"><a name="railsAppLimit"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Max Apps Per Account<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies the maximum number of Rack/Rails applications that can be created per account. The default is "1".</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> <tr><td><span class="ht-label">Tips: </span>[Performance] Rack/Rails applications can take a  large amount of system resources. Thus it is not recommended to set this limit too high,  otherwise it may affect the performance of whole server if one user abuses it.</td></tr> </table> </div>
<div class="helpitem"><a name="rubyProcLimit"></a><table width="100%" class="ht" border="0" cellpadding="5" cellspacing="0"> <tr class="ht-title"><td><div>Max Ruby Processes Per Account<span class="top"><a href="#top"><img border=0 height=13 width=13 alt="Go to top" src="img/top.gif"></a></span></div></td></tr> <tr><td><span class="ht-label">Description: </span>Specifies the maximum number of Ruby processes that can be created per account. The default is "10". If one account runs multiple Rack/Rails applications, the total number of Ruby processes of all applications cannot exceed this limit. Each ruby process will take large amount of system resource, it is not recommended to set a high limit, otherwise, it will affect the performance of whole server if one user abuse it.</td></tr> <tr><td><span class="ht-label">Syntax: </span>Integer number</td></tr> <tr><td><span class="ht-label">Tips: </span>[Performance] Ruby processes can take a large amount of system resources. Thus it is not recommended to set this limit too high, otherwise it may affect the performance of the whole server if one user abuses it.</td></tr> </table> </div>
</section>
</div><footer class="copyright">Copyright &copy; 2003-2014. <a href="http://www.litespeedtech.com">Lite Speed Technologies Inc.</a> All rights reserved.</footer>
				</div>
				</body>
				</html>